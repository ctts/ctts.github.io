(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{302:function(t,a,s){"use strict";s.r(a);var n=s(14),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_20201129-记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_20201129-记录"}},[t._v("#")]),t._v(" 20201129 记录")]),t._v(" "),s("h2",{attrs:{id:"docker-换源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-换源"}},[t._v("#")]),t._v(" docker 换源")]),t._v(" "),s("p",[t._v("将 docker engine 配置改为")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry-mirrors"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://ovfftd6p.mirror.aliyuncs.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://registry.docker-cn.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://docker.mirrors.ustc.edu.cn"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://hub-mirror.c.163.com"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"insecure-registries"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry.docker-cn.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker.mirrors.ustc.edu.cn"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"debug"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"experimental"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"gitlab-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-安装"}},[t._v("#")]),t._v(" gitlab 安装")]),t._v(" "),s("h3",{attrs:{id:"打开-docker-，拉取-gitlab-ce-镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打开-docker-，拉取-gitlab-ce-镜像"}},[t._v("#")]),t._v(" 打开 docker ，拉取 gitlab-ce 镜像")]),t._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[t._v("docker pull gitlab/gitlab"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ce\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker run -d  -p 443:443 -p 80:80 -p 222:22 --name gitlab --restart always -v /Users/taojiaxing/SelfSpace/gitlab/config:/etc/gitlab -v /Users/taojiaxing/SelfSpace/gitlab/logs:/var/log/gitlab -v /Users/taojiaxing/SelfSpace/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n")])])]),s("p",[t._v("or")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run --detach "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --hostname gitlab.ctts.com "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --publish "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v(":443 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --publish "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8880")]),t._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --publish "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8222")]),t._v(":22 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --name gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --restart always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --volume /Users/taojiaxing/SelfSpace/gitlab/config:/etc/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --volume /Users/taojiaxing/SelfSpace/gitlab/logs:/var/log/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --volume /Users/taojiaxing/SelfSpace/gitlab/data:/var/opt/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true \n  gitlab/gitlab-ce\n")])])]),s("ul",[s("li",[t._v("--hostname gitlab.example.com: 设置主机名或域名")]),t._v(" "),s("li",[t._v("--publish 8443:443：将http：443映射到外部端口8443")]),t._v(" "),s("li",[t._v("--publish 8880:80：将web：80映射到外部端口8880")]),t._v(" "),s("li",[t._v("--publish 8222:22：将ssh：22映射到外部端口8222")]),t._v(" "),s("li",[t._v("--name gitlab: 运行容器名")]),t._v(" "),s("li",[t._v("--restart always: 自动重启")]),t._v(" "),s("li",[t._v("--volume /srv/gitlab/config:/etc/gitlab: 挂载目录")]),t._v(" "),s("li",[t._v("--volume /srv/gitlab/logs:/var/log/gitlab: 挂载目录")]),t._v(" "),s("li",[t._v("--volume /srv/gitlab/data:/var/opt/gitlab: 挂载目录")]),t._v(" "),s("li",[t._v("--privileged=true 使得容器内的root拥有真正的root权限。否则，container内的root只是外部的一个普通用户权限")])]),t._v(" "),s("p",[t._v("完成后等待几分钟后就能访问"),s("code",[t._v("localhost")]),t._v("来访问了。")]),t._v(" "),s("p",[t._v("根用户是")]),t._v(" "),s("p",[s("code",[t._v("root")])]),t._v(" "),s("p",[t._v("初始密码是第一次登陆时设置的")]),t._v(" "),s("h2",{attrs:{id:"node-js-在代码中使用-async-和直接写同步代码的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-js-在代码中使用-async-和直接写同步代码的区别"}},[t._v("#")]),t._v(" node.js 在代码中使用 async 和直接写同步代码的区别")]),t._v(" "),s("p",[t._v("简单来说就是")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("上面这段代码的区别")]),t._v(" "),s("p",[t._v("如果只是这样是没有区别的，但是当代码行数增加时就有了区别。")]),t._v(" "),s("p",[t._v("async/await 和同步代码的核心区别就在于，前者在调用的地方是非阻塞的，而内部代码是阻塞的。也就是说并不会阻塞主线程。")]),t._v(" "),s("p",[t._v("那么问题就来了，"),s("strong",[t._v("async/await 是如何做到不阻塞主线程而实现同步代码的？")])]),t._v(" "),s("p",[t._v("下次再说吧。")])])}),[],!1,null,null,null);a.default=e.exports}}]);